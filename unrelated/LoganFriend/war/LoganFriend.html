<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<!--                                                               -->
<!-- Consider inlining CSS to reduce the number of requested files -->
<!--                                                               -->
<link type="text/css" rel="stylesheet" href="LoganFriend.css">

<!--                                           -->
<!-- Any title is fine                         -->
<!--                                           -->
<title>Web Application Starter Project</title>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>

  <!-- Load the Google Friend Connect javascript library. -->
  <script type="text/javascript">
    google.load('friendconnect', '0.8');
  </script>

  <!-- Initialize the Google Friend Connect OpenSocial API. -->
  <script type="text/javascript">
  function stringify(o, depth) {
	  if (!o || typeof o != 'object')
		  return o;
	  if (!depth)
			depth=0
		var s = ['{'];
	for (var a in o) {
		s.push(a + ":" + stringify(o[a], depth+1));
	}
	s.push('}');
	var sep = "\n";
	for (var i = 0; i < depth; i++) {
		sep += "  ";
	}
	return s.join(sep);
  }
	//alert(stringify({id:'nine', wash: {one: 1, two: null}})); 

  google.friendconnect.container.setParentUrl('/' /* location of rpc_relay.html and canvas.html */);
  var openSocialLoadCount = 0;
  google.friendconnect.container.initOpenSocialApi({
    site: '06869252846758821728',
    onload: function(securityToken) {
	    if (openSocialLoadCount++ > 0) {
	    	var req = opensocial.newDataRequest();
	    	req.add(req.newFetchPersonRequest("VIEWER"), "viewer_data");
	    	req.send(function(data) {
	    		if (data.get("viewer_data").hadError()) {
		    		//not logged in
	    		} else {
					//alert(stringify(data.get("viewer_data")));
					alert(data.get("viewer_data").getData().getId());
		    		friendConnectUserLoaded(data.get("viewer_data").getData().getId());
	    		}
	    	});
	    }
	}
  });


  </script>
  
<!--                                           -->
<!-- This script loads your compiled module.   -->
<!-- If you add any GWT meta tags, they must   -->
<!-- be added before this line.                -->
<!--                                           -->
<script type="text/javascript" language="javascript"
	src="loganfriend/loganfriend.nocache.js"></script>
  <!-- Load the Google AJAX API Loader -->
 

</head>

<!--                                           -->
<!-- The body can have arbitrary html, or      -->
<!-- you can leave the body empty if you want  -->
<!-- to create a completely dynamic UI.        -->
<!--                                           -->
<body>

<!-- OPTIONAL: include this if you want history support -->
<iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1'
	style="position: absolute; width: 0; height: 0; border: 0"></iframe>

<h1>Web Application Starter Project</h1>

<table align="center">
	<tr>
		<td id="friendConnectLogin">
		</td>
		<td>
		<table>
			<tr>
				<td>Login Name:</td>
				<td id="loginName"></td>
			</tr>
			<tr>
				<td>Password:</td>
				<td id="password"></td>
			</tr>
			<tr>
				<td id="loginOptions" colspan="2"></td>
			</tr>
		</table>
		</td>
	</tr>
	<tr>
		<td id="userList" colspan="2"></td>
	</tr>
</table>
</body>
</html>
